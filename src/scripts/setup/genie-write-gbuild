#! /usr/bin/perl -w
#
# Creates the $GENIE/src/Conventions/GBuild.h header file
#
# C.Andreopoulos <C.V.Andreopoulos@rl.ac.uk>, Rutherford Lab.
#

$GENIE = $ENV{'GENIE'};
die ("Not even the GENIE environmental variable is defined!") unless defined $GENIE;

# Read build options 
$GOPT_ENABLE_GIBUU = $ENV{'GOPT_ENABLE_GIBUU'};
$GOPT_ENABLE_FLUKA = $ENV{'GOPT_ENABLE_FLUKA'};

# Don't use undefined vars
$GOPT_ENABLE_GIBUU = "**undefined**" unless defined $GOPT_ENABLE_GIBUU;
$GOPT_ENABLE_FLUKA = "**undefined**" unless defined $GOPT_ENABLE_FLUKA;

# Open header file
$GBLD_FILE = "$GENIE/src/Conventions/GBuild.h";
open(GBLD, ">$GBLD_FILE") or die("Can not write out the GBuild.h file!");

# Write header file
print GBLD "#ifndef _GBUILD_H_ \n";
print GBLD "#define _GBUILD_H_ \n";
print GBLD "/* \n";
print GBLD " * Build information automatically generated by the GENIE installer \n";
print GBLD "*/ \n\n";
print GBLD "#define __GENIE_PYTHIA6_ENABLED__\n";
if($GOPT_ENABLE_GIBUU eq "yes") { print GBLD   "#define __GENIE_GIBUU_ENABLED__\n"; }
else                            { print GBLD "//#define __GENIE_GIBUU_ENABLED__\n"; }
if($GOPT_ENABLE_FLUKA eq "yes") { print GBLD   "#define __GENIE_FLUKA_ENABLED__\n"; }
else                            { print GBLD "//#define __GENIE_FLUKA_ENABLED__\n"; }
print GBLD "\n#endif\n\n";

# Close header file
close(GBLD);

